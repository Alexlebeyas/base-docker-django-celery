<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project Starter</title>
    <style>
        body {
            margin: auto;
            background-color: #eee;
            font-family: "Arial", Helvetica, sans-serif;
            max-width: 700px;
            font-size: 18px;
        }

        .code {
            background-color: #e5e5e5;
            padding: 10px;
            margin: 10px;
            font-style: italic;
        }

        .author {
            margin-top: 30px;
        }
    </style>
</head>
<body>

<h1>Django Production Environment</h1>
<p>
    Project starter is a fully configured and blank django project with all of our tech.
    It is meant to be copied into a new repository and installed via the install command.
    Its main function is to generate tokens, passwords and parse the project name and user.
</p>

<ul>
    <li><a href="#uwsgi">uWSGI</a></li>
    <li><a href="#nginx">Nginx</a></li>
    <li><a href="#postgresql">PostgreSQL</a></li>
    <li><a href="#supervisor">Supervisor</a></li>
    <li><a href="#redis">Redis</a></li>
    <li><a href="#celery">Celery</a></li>
</ul>

<h2 id="uwsgi">uWSGI</h2>
<p>
    uWSGI is our python server that runs our django code using the wsgi protocol.
    It is only accessible locally through either an http socket or sockfile. This is because
    traffic comes through nginx and is redirected internally. uWSGI has settings and logs
    that are pretty simple. Most important settings are the number of processes (1 per core)
    and the number of threads (as much as your ram can take). uWSGI is not a service, it is
    executed by Supervisor, which is a daemon controller.
</p>
<p class="code"><a
        href="https://uwsgi-docs.readthedocs.org/en/latest/">https://uwsgi-docs.readthedocs.org/en/latest/</a></p>
<p>In development, we use pycharm's built-in runserver.</p>

<h2 id="nginx">Nginx</h2>
<p>
    Nginx is our main web server that receives all http requests on port 80.
    It does routing of requests, serve static files and redirect to our python server.
    This is also where you configurate www. redirection and ssl certificates for https.
    Configurations of nginx are found in <i>/etc/nginx/</i> and virtual hosts are stored in
    <i>/etc/nginx/sites-available/</i>.
</p>
<p class="code"><a href="https://www.nginx.com/">https://www.nginx.com/</a></p>
<p>In development, we serve staticfiles with runserver and django.</p>

<h2 id="postgresql">PostgreSQL</h2>
<p>
    Just a normal relational database like MySQL or OracleSQL. django only needs a database ROLE that
    gives permission to create databases (to run tests) and a blank database with the project name.
    Almost all of its management is done through django.
</p>
<p class="code"><a href="http://www.postgresql.org/">http://www.postgresql.org/</a></p>
<p>In development, we use sqlite database that is file based and easy to start-over.</p>

<h2 id="supervisor">Supervisor</h2>
<p>
    Supervisor is a service made to guarantee that a program is running. It also has a shell
    and some management functions that allows us to restart our programs gracefully. We use it
    to run uWSGI and Celery.
</p>
<p class="code"><a href="http://supervisord.org/">http://supervisord.org/</a></p>
<p>In development, we use pycharm to manage our python server (aka. runserver).</p>

<h2 id="redis">Redis</h2>
<p>
    This is our cache backend. Redis is a very performant key/value store that can do cache very well.
    All the cache from the django application is stored on there, with the addition of web sessions
    and celery tasks.
</p>
<p class="code"><a href="http://redis.io/">http://redis.io/</a></p>
<p>In development, we use locmem, a local memory backend for django.</p>

<h2 id="celery">Celery</h2>
<p>
    Celery is a python app with a django interface that allows us to delay function calls or to
    schedule them periodically. Django-celery interface and celery processes use redis to exchange data.
</p>
<p class="code"><a href="http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html">
    http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html</a></p>
<p>
    In development, we execute tasks synchronously as if we did not use Celery.
    Although, periodic tasks should be tested with Redis.
</p>

<p class="author">Author: Simon Lessnick</p>
</body>
</html>